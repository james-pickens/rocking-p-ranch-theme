{% schema %}
{
  "name": "Air Handling Calculator",
  "settings": [
    { "type": "text", "id": "section_title", "label": "Section Title", "default": "Gwin Mini-Split Calculator" },
    { "type": "textarea", "id": "section_description", "label": "Section Description", "default": "Calculate the right HVAC system for your space" }
  ],
  "presets": [{ "name": "Air Handling Calculator" }]
}
{% endschema %}

{%- comment -%}
Safest: load CSS/JS from assets so Shopify adds CSP nonce.
Upload the two files below to /assets first:
  - air-calculator.css
  - air-calculator.js (production obfuscated version)
Source code: gwin-calculator-nov13.js (do not upload to Shopify)
{%- endcomment -%}

{{ 'air-calculator.css' | asset_url | stylesheet_tag }}

<div class="ahc-shell">
  <button type="button" class="ahc-launch" data-ahc-open="{{ section.id }}">
    {{ section.settings.section_title | escape | default: 'Open HVAC Calculator' }}
  </button>

  <div class="ahc-modal" id="ahc-modal-{{ section.id }}" hidden>
    <div class="ahc-backdrop" data-ahc-close></div>
    <div class="ahc-dialog" role="dialog" aria-modal="true" aria-labelledby="ahc-title-{{ section.id }}">
      <div class="ahc-hdr">
        <h3 class="ahc-title" id="ahc-title-{{ section.id }}">{{ section.settings.section_title }}</h3>
        <button class="ahc-x" type="button" aria-label="Close" data-ahc-close>&times;</button>
      </div>
      <div class="ahc-body">
        <!-- your existing calculator root goes here -->
        <div
          id="air-calculator-{{ section.id }}"
          class="air-calculator-wrapper"
          data-air-calculator
          data-section-id="{{ section.id }}"
          data-title="{{ section.settings.section_title | escape }}"
          data-description="{{ section.settings.section_description | escape }}"
        ></div>
      </div>
    </div>
  </div>
</div>

<script>
  window.HVAC_CONFIG_URL = {{ 'hvac-calculator-config-gwin.json' | asset_url | json }};
</script>

<script src="{{ 'air-calculator.js' | asset_url }}" defer></script>
